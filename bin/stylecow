#!/usr/bin/env node

var stylecow = require('../lib'),
	info = require('../lib/info'),
	args = process.argv.slice(2);

if (!args.length) {
	info.print();
	process.exit(0);
}

var file = (args[0] && args[0][0] !== '-') ? args.shift() : null;

if (!file) {
	console.log('Filename is required: stylecow <filename> (--options)');
	process.exit(1);
}

var css = stylecow.loadFile(file);

args.forEach(function (arg) {
	if (!css.setSetting(arg)) {
		console.log('Unrecognised argument: ' + arg);
		process.exit(1);
	}
});

css.transform();

process.stdout.write(css.toString() + '\n');
